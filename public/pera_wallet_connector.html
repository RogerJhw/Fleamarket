<!DOCTYPE html>
<html>
  <head>
    <title>Pera Wallet Connect</title>
    <script src="https://cdn.jsdelivr.net/npm/@perawallet/connect"></script>
  </head>
  <body>
    <button id="connect">Connect Pera Wallet</button>
    <p id="status">Not connected</p>

    <script>
      const connect = async () => {
        try {
          const peraWallet = new window.PeraWalletConnect();
          const accounts = await peraWallet.connect();
          document.getElementById('status').textContent = "Connected: " + accounts[0];
          window.parent.postMessage({ wallet: accounts[0] }, "*");
        } catch (err) {
          document.getElementById('status').textContent = "Connection failed";
          console.error(err);
        }
      };
      document.getElementById('connect').onclick = connect;
    </script>
  </body>
</html>
